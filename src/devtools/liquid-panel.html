<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta content="width=device-width, initial-scale=1.0" name="viewport" />
        <title>MicroTSM Devtools Panel</title>
        <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
        <link href="https://fonts.googleapis.com" rel="preconnect" />
        <link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect" />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap"
            rel="stylesheet"
        />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet" />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet" />
        <style type="text/tailwindcss">
            :root {
                --background-light: rgba(255, 255, 255, 0.6);
                --background-medium: rgba(248, 248, 248, 0.5);
                --background-dark: rgba(28, 28, 30, 0.7);
                --text-primary-light: #1d1d1f;
                --text-secondary-light: #6e6e73;
                --text-primary-dark: #f5f5f7;
                --text-secondary-dark: #a1a1a6;
                --accent-blue: #007aff;
                --accent-green: #34c759;
                --accent-yellow: #ffcc00;
                --accent-red: #ff3b30;
                --divider-light: rgba(229, 229, 234, 0.5);
                --divider-dark: rgba(58, 58, 60, 0.5);
                --panel-shadow: 0px 10px 30px rgba(0, 0, 0, 0.1), 0px 2px 8px rgba(0, 0, 0, 0.05);
                --control-background-light: rgba(242, 242, 247, 0.6);
                --control-background-dark: rgba(44, 44, 46, 0.7);
                --glass-blur: backdrop-filter;
                --glass-blur-value: blur(12px);
                --glass-border-radius: 16px;
                --glass-border: 1px solid rgba(255, 255, 255, 0.2);
            }

            body {
                font-family:
                    'Inter',
                    -apple-system,
                    BlinkMacSystemFont,
                    'SF Pro Text',
                    'Segoe UI',
                    Roboto,
                    Helvetica,
                    Arial,
                    sans-serif,
                    'Apple Color Emoji',
                    'Segoe UI Emoji',
                    'Segoe UI Symbol';
                background-color: transparent;
                color: var(--text-primary-light);
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .glass-panel {
                background-color: var(--background-light);
                border-radius: var(--glass-border-radius);
                box-shadow: var(--panel-shadow);
                border: var(--glass-border);
                @apply supports-[backdrop-filter]:bg-white/60 supports-[backdrop-filter]:backdrop-blur-lg;
            }

            .glass-surface {
                background-color: var(--background-medium);
                @apply supports-[backdrop-filter]:bg-slate-100/50 supports-[backdrop-filter]:backdrop-blur-md;
                border-radius: 12px;
            }

            .table-container {
                max-height: 300px;
                overflow-y: auto;
                border: 1px solid var(--divider-light);
                border-radius: 10px;
                @apply supports-[backdrop-filter]:bg-white/30;
            }

            .tab-active {
                background-color: var(--accent-blue) !important;
                color: var(--background-light) !important;
                font-weight: 600;
                border-radius: 10px;
                box-shadow: 0 2px 8px rgba(0, 122, 255, 0.3);
                @apply supports-[backdrop-filter]:bg-blue-500/70;
            }

            .tab-active .material-icons-outlined,
            .tab-active .material-icons-round {
                color: var(--background-light) !important;
            }

            .devtools-panel-compact aside {
                width: 5rem;
                @apply supports-[backdrop-filter]:bg-slate-200/40 supports-[backdrop-filter]:backdrop-blur-sm;
            }

            .devtools-panel-compact aside nav button {
                justify-content: center;
                padding-left: 0.75rem;
                padding-right: 0.75rem;
                height: 3.5rem;
                border-radius: 10px;
            }

            .devtools-panel-compact aside nav button .tab-label {
                display: none;
            }

            .devtools-panel-fullscreen aside {
                width: 260px;
                padding: 1rem;
                background-color: var(--background-medium);
                @apply supports-[backdrop-filter]:bg-slate-100/50 supports-[backdrop-filter]:backdrop-blur-md;
            }

            .devtools-panel-fullscreen aside nav button {
                justify-content: flex-start;
                height: 3rem;
                padding: 0 1rem;
                border-radius: 10px;
            }

            .devtools-panel-fullscreen aside nav button .tab-label {
                display: inline;
                margin-left: 0.75rem;
            }

            .icon-button {
                color: var(--text-secondary-light);
                background-color: rgba(255, 255, 255, 0.3);
                padding: 0.5rem;
                border-radius: 9999px;
                transition:
                    background-color 0.2s ease-in-out,
                    color 0.2s ease-in-out,
                    transform 0.1s ease-in-out;
                @apply supports-[backdrop-filter]:bg-white/40;
            }

            .icon-button:hover {
                background-color: rgba(255, 255, 255, 0.5);
                color: var(--accent-blue);
                transform: scale(1.1);
            }

            .icon-button:active {
                background-color: rgba(255, 255, 255, 0.7);
                transform: scale(0.95);
            }

            .status-badge {
                display: inline-flex;
                align-items: center;
                padding: 0.3rem 0.75rem;
                border-radius: 9999px;
                font-size: 0.8rem;
                font-weight: 500;
                border: 1px solid transparent;
                @apply supports-[backdrop-filter]:backdrop-blur-sm;
            }

            .status-badge-green {
                background-color: rgba(52, 199, 89, 0.2);
                color: var(--accent-green);
                border-color: rgba(52, 199, 89, 0.4);
            }

            .status-badge-yellow {
                background-color: rgba(255, 204, 0, 0.2);
                color: #d97706;
                border-color: rgba(255, 204, 0, 0.4);
            }

            .status-badge-red {
                background-color: rgba(255, 59, 48, 0.2);
                color: var(--accent-red);
                border-color: rgba(255, 59, 48, 0.4);
            }

            .status-badge-gray {
                background-color: var(--control-background-light);
                color: var(--text-secondary-light);
                border-color: var(--divider-light);
            }

            .status-badge .material-icons-outlined,
            .status-badge .material-icons-round {
                font-size: 1rem;
                margin-right: 0.375rem;
            }

            input[type='text'],
            input[type='search'] {
                background-color: var(--control-background-light);
                border: 1px solid var(--divider-light);
                border-radius: 10px;
                padding: 0.625rem 0.875rem;
                font-size: 0.875rem;
                color: var(--text-primary-light);
                transition:
                    border-color 0.2s ease-in-out,
                    box-shadow 0.2s ease-in-out,
                    background-color 0.2s ease-in-out;
                @apply supports-[backdrop-filter]:bg-white/50;
            }

            input[type='text']:focus,
            input[type='search']:focus {
                border-color: var(--accent-blue);
                box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.25);
                outline: none;
                background-color: rgba(255, 255, 255, 0.7);
            }

            .search-input-container {
                position: relative;
            }

            .search-input-container .material-icons-outlined {
                position: absolute;
                left: 0.875rem;
                top: 50%;
                transform: translateY(-50%);
                color: var(--text-secondary-light);
                font-size: 1.25rem;
            }

            .search-input-container input[type='search'] {
                padding-left: 2.75rem;
            }

            table {
                font-size: 0.875rem;
                border-collapse: separate;
                border-spacing: 0;
            }

            th {
                background-color: rgba(248, 248, 248, 0.3);
                color: var(--text-secondary-light);
                font-weight: 600;
                text-transform: none;
                letter-spacing: normal;
                padding: 0.75rem 0.875rem;
                border-bottom: 1px solid var(--divider-light);
                @apply supports-[backdrop-filter]:bg-slate-100/30 supports-[backdrop-filter]:backdrop-blur-sm;
            }

            th:first-child {
                border-top-left-radius: 8px;
            }

            th:last-child {
                border-top-right-radius: 8px;
            }

            td {
                color: var(--text-primary-light);
                padding: 0.75rem 0.875rem;
                border-bottom: 1px solid var(--divider-light);
                background-color: rgba(255, 255, 255, 0.1);
                @apply supports-[backdrop-filter]:bg-white/20;
            }

            tbody tr:last-child td:first-child {
                border-bottom-left-radius: 8px;
            }

            tbody tr:last-child td:last-child {
                border-bottom-right-radius: 8px;
            }

            tbody tr:last-child td {
                border-bottom: none;
            }

            .module-override-url {
                font-size: 0.8125rem;
            }

            .dialog-overlay {
                background-color: rgba(0, 0, 0, 0.5);
                @apply supports-[backdrop-filter]:backdrop-blur-sm;
            }

            .dialog-content {
                background-color: var(--background-light);
                border-radius: var(--glass-border-radius);
                box-shadow: 0px 15px 40px rgba(0, 0, 0, 0.2);
                padding: 1.75rem;
                border: var(--glass-border);
                @apply supports-[backdrop-filter]:bg-white/70 supports-[backdrop-filter]:backdrop-blur-xl;
            }

            .dialog-title {
                font-size: 1.25rem;
                font-weight: 600;
                color: var(--text-primary-light);
            }

            .dialog-message {
                font-size: 0.9rem;
                color: var(--text-secondary-light);
                margin-top: 0.75rem;
            }

            .dialog-checkbox-label {
                font-size: 0.875rem;
                color: var(--text-primary-light);
            }

            input[type='checkbox'] {
                border-radius: 6px;
                border-color: var(--divider-light);
                color: var(--accent-blue);
                background-color: rgba(255, 255, 255, 0.3);
                @apply supports-[backdrop-filter]:bg-white/40;
            }

            input[type='checkbox']:focus {
                ring: var(--accent-blue);
                ring-offset-color: var(--background-light);
                ring-offset: 2px;
            }

            .button-primary {
                background-color: var(--accent-blue);
                color: white;
                font-weight: 500;
                padding: 0.625rem 1.25rem;
                border-radius: 10px;
                transition:
                    background-color 0.2s ease-in-out,
                    transform 0.1s ease;
                box-shadow: 0 2px 8px rgba(0, 122, 255, 0.25);
            }

            .button-primary:hover {
                background-color: #006adc;
                transform: translateY(-1px);
            }

            .button-primary:active {
                transform: translateY(0px);
                background-color: #005cb3;
            }

            .button-secondary {
                background-color: var(--control-background-light);
                color: var(--accent-blue);
                font-weight: 500;
                padding: 0.625rem 1.25rem;
                border-radius: 10px;
                border: 1px solid var(--divider-light);
                transition:
                    background-color 0.2s ease-in-out,
                    transform 0.1s ease;
                @apply supports-[backdrop-filter]:bg-white/50;
            }

            .button-secondary:hover {
                background-color: rgba(233, 233, 237, 0.7);
                border-color: rgba(0, 122, 255, 0.5);
                transform: translateY(-1px);
            }

            .button-secondary:active {
                transform: translateY(0px);
                background-color: rgba(220, 220, 224, 0.7);
            }

            .header {
                background-color: rgba(248, 248, 248, 0.4);
                color: var(--text-primary-light);
                border-bottom: 1px solid var(--divider-light);
                @apply supports-[backdrop-filter]:bg-slate-100/40 supports-[backdrop-filter]:backdrop-blur-md;
                border-top-left-radius: var(--glass-border-radius);
                border-top-right-radius: var(--glass-border-radius);
            }

            .footer {
                background-color: rgba(248, 248, 248, 0.4);
                color: var(--text-secondary-light);
                border-top: 1px solid var(--divider-light);
                @apply supports-[backdrop-filter]:bg-slate-100/40 supports-[backdrop-filter]:backdrop-blur-md;
                border-bottom-left-radius: var(--glass-border-radius);
                border-bottom-right-radius: var(--glass-border-radius);
            }

            .devtools-panel-fullscreen .header {
                border-top-left-radius: 0;
                border-top-right-radius: 0;
            }

            .devtools-panel-fullscreen .footer {
                border-bottom-left-radius: 0;
                border-bottom-right-radius: 0;
            }
        </style>
    </head>
    <body
        class="bg-gradient-to-br from-purple-600 via-pink-500 to-red-500 min-h-screen flex items-center justify-center p-4"
    >
        <div
            class="fixed bottom-4 right-4 w-[850px] max-h-[calc(100vh-32px)] flex flex-col overflow-hidden transition-all duration-300 ease-in-out devtools-panel-compact glass-panel"
            id="devtools-panel"
        >
            <header class="header p-3 flex items-center justify-between">
                <div class="flex items-center gap-2">
                    <span class="material-icons-outlined text-xl text-[var(--accent-blue)]">build_circle</span>
                    <h1 class="text-base font-semibold text-[var(--text-primary-light)]">MicroTSM DevTools</h1>
                </div>
                <div class="flex items-center gap-1">
                    <button class="icon-button" id="toggle-fullscreen-btn" title="Toggle Fullscreen">
                        <span class="material-icons-outlined text-xl">fullscreen</span>
                    </button>
                    <button class="icon-button" id="close-panel-btn" title="Close Panel">
                        <span class="material-icons-round text-xl">close</span>
                    </button>
                </div>
            </header>
            <div class="flex flex-grow overflow-hidden">
                <aside
                    class="border-r border-[var(--divider-light)] p-1 transition-all duration-300 ease-in-out glass-surface !bg-opacity-30"
                >
                    <nav class="space-y-1">
                        <button
                            class="w-full flex items-center gap-3 px-3 py-2 text-left text-sm font-medium text-[var(--text-secondary-light)] hover:bg-gray-500/20 rounded-lg border-l-4 border-transparent transition-colors duration-150 tab-active"
                            data-tab="import-map-overrides"
                        >
                            <span class="material-icons-outlined text-lg">tune</span>
                            <span class="tab-label">Overrides</span>
                        </button>
                        <button
                            class="w-full flex items-center gap-3 px-3 py-2 text-left text-sm font-medium text-[var(--text-secondary-light)] hover:bg-gray-500/20 rounded-lg border-l-4 border-transparent transition-colors duration-150"
                            data-tab="module-loader-log"
                        >
                            <span class="material-icons-outlined text-lg">description</span>
                            <span class="tab-label">Loader Log</span>
                        </button>
                        <button
                            class="w-full flex items-center gap-3 px-3 py-2 text-left text-sm font-medium text-[var(--text-secondary-light)] hover:bg-gray-500/20 rounded-lg border-l-4 border-transparent transition-colors duration-150"
                            data-tab="performance-metrics"
                        >
                            <span class="material-icons-outlined text-lg">speed</span>
                            <span class="tab-label">Performance</span>
                        </button>
                        <button
                            class="w-full flex items-center gap-3 px-3 py-2 text-left text-sm font-medium text-[var(--text-secondary-light)] hover:bg-gray-500/20 rounded-lg border-l-4 border-transparent transition-colors duration-150"
                            data-tab="contextual-information"
                        >
                            <span class="material-icons-outlined text-lg">info</span>
                            <span class="tab-label">Context</span>
                        </button>
                    </nav>
                </aside>
                <main class="flex-grow p-4 overflow-y-auto bg-transparent">
                    <div class="tab-pane active" id="tab-content-import-map-overrides">
                        <section class="mb-6">
                            <div class="bg-transparent p-0">
                                <div class="flex justify-between items-center mb-4">
                                    <h2 class="text-xl font-semibold text-[var(--text-primary-light)]">
                                        Import Map Overrides
                                    </h2>
                                    <span class="status-badge status-badge-green" id="persisted-status">
                                        <span class="material-icons-round">save</span> Overrides Persisted
                                    </span>
                                </div>
                                <div class="search-input-container mb-4">
                                    <span class="material-icons-outlined">search</span>
                                    <input
                                        class="w-full"
                                        id="search-modules-input"
                                        placeholder="Search modules..."
                                        type="search"
                                    />
                                </div>
                                <div class="table-container">
                                    <table class="min-w-full">
                                        <thead class="sticky top-0 z-10">
                                            <tr>
                                                <th scope="col">Module Name</th>
                                                <th scope="col">Original URL</th>
                                                <th scope="col">Override URL</th>
                                                <th scope="col">Load Time</th>
                                                <th scope="col">Status</th>
                                                <th scope="col">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-[var(--divider-light)]" id="modules-tbody">
                                            <tr>
                                                <td class="font-medium">@microtsm/core</td>
                                                <td
                                                    class="text-xs max-w-[100px] truncate text-[var(--text-secondary-light)]"
                                                    title="https://cdn.jsdelivr.net/npm/@microtsm/core@1.2.3/dist/index.js"
                                                >
                                                    https://cdn.jsdelivr.net/npm/@microtsm/core@1.2.3/dist/index.js
                                                </td>
                                                <td>
                                                    <input
                                                        class="module-override-url w-full bg-transparent border-slate-400/50 focus:bg-white/70"
                                                        placeholder="Enter override URL"
                                                        type="text"
                                                        value="http://localhost:8080/core.js"
                                                    />
                                                </td>
                                                <td class="text-[var(--text-secondary-light)]">120ms</td>
                                                <td>
                                                    <span class="status-badge status-badge-green">
                                                        <span class="material-icons-round">check_circle</span> Loaded
                                                    </span>
                                                </td>
                                                <td class="space-x-2">
                                                    <button
                                                        class="icon-button text-[var(--accent-blue)] hover:bg-blue-500/20"
                                                        title="Save Override"
                                                    >
                                                        <span class="material-icons-outlined text-lg">save</span>
                                                    </button>
                                                    <button
                                                        class="icon-button text-[var(--text-secondary-light)] hover:bg-gray-500/20"
                                                        title="Reset to Default"
                                                    >
                                                        <span class="material-icons-outlined text-lg">undo</span>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="font-medium">@microtsm/utils</td>
                                                <td
                                                    class="text-xs max-w-[100px] truncate text-[var(--text-secondary-light)]"
                                                    title="https://cdn.jsdelivr.net/npm/@microtsm/utils@0.5.1/dist/index.js"
                                                >
                                                    https://cdn.jsdelivr.net/npm/@microtsm/utils@0.5.1/dist/index.js
                                                </td>
                                                <td>
                                                    <input
                                                        class="module-override-url w-full bg-transparent border-slate-400/50 focus:bg-white/70"
                                                        placeholder="Enter override URL"
                                                        type="text"
                                                    />
                                                </td>
                                                <td class="text-[var(--text-secondary-light)]">-</td>
                                                <td>
                                                    <span class="status-badge status-badge-yellow">
                                                        <span class="material-icons-round">hourglass_empty</span>
                                                        Pending
                                                    </span>
                                                </td>
                                                <td class="space-x-2">
                                                    <button
                                                        class="icon-button text-[var(--accent-blue)] hover:bg-blue-500/20"
                                                        title="Save Override"
                                                    >
                                                        <span class="material-icons-outlined text-lg">save</span>
                                                    </button>
                                                    <button
                                                        class="icon-button text-[var(--text-secondary-light)] hover:bg-gray-500/20"
                                                        title="Reset to Default"
                                                    >
                                                        <span class="material-icons-outlined text-lg">undo</span>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="font-medium">@microtsm/ui-components</td>
                                                <td
                                                    class="text-xs max-w-[100px] truncate text-[var(--text-secondary-light)]"
                                                    title="https://cdn.jsdelivr.net/npm/@microtsm/ui-components@2.0.0/dist/main.js"
                                                >
                                                    https://cdn.jsdelivr.net/npm/@microtsm/ui-components@2.0.0/dist/main.js
                                                </td>
                                                <td>
                                                    <input
                                                        class="module-override-url w-full bg-transparent border-slate-400/50 focus:bg-white/70"
                                                        placeholder="Enter override URL"
                                                        type="text"
                                                        value="http://localhost:9001/ui.js"
                                                    />
                                                </td>
                                                <td class="text-[var(--text-secondary-light)]">-</td>
                                                <td>
                                                    <span class="status-badge status-badge-red">
                                                        <span class="material-icons-round">error</span> Error
                                                    </span>
                                                </td>
                                                <td class="space-x-2">
                                                    <button
                                                        class="icon-button text-[var(--accent-blue)] hover:bg-blue-500/20"
                                                        title="Save Override"
                                                    >
                                                        <span class="material-icons-outlined text-lg">save</span>
                                                    </button>
                                                    <button
                                                        class="icon-button text-[var(--text-secondary-light)] hover:bg-gray-500/20"
                                                        title="Reset to Default"
                                                    >
                                                        <span class="material-icons-outlined text-lg">undo</span>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="font-medium">@another/module</td>
                                                <td
                                                    class="text-xs max-w-[100px] truncate text-[var(--text-secondary-light)]"
                                                    title="https://cdn.jsdelivr.net/npm/@another/module@1.0.0/index.js"
                                                >
                                                    https://cdn.jsdelivr.net/npm/@another/module@1.0.0/index.js
                                                </td>
                                                <td>
                                                    <input
                                                        class="module-override-url w-full bg-transparent border-slate-400/50 focus:bg-white/70"
                                                        placeholder="Enter override URL"
                                                        type="text"
                                                    />
                                                </td>
                                                <td class="text-[var(--text-secondary-light)]">80ms</td>
                                                <td>
                                                    <span class="status-badge status-badge-green">
                                                        <span class="material-icons-round">check_circle</span> Loaded
                                                    </span>
                                                </td>
                                                <td class="space-x-2">
                                                    <button
                                                        class="icon-button text-[var(--accent-blue)] hover:bg-blue-500/20"
                                                        title="Save Override"
                                                    >
                                                        <span class="material-icons-outlined text-lg">save</span>
                                                    </button>
                                                    <button
                                                        class="icon-button text-[var(--text-secondary-light)] hover:bg-gray-500/20"
                                                        title="Reset to Default"
                                                    >
                                                        <span class="material-icons-outlined text-lg">undo</span>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td class="font-medium">@yet-another/lib</td>
                                                <td
                                                    class="text-xs max-w-[100px] truncate text-[var(--text-secondary-light)]"
                                                    title="https://cdn.jsdelivr.net/npm/@yet-another/lib@3.2.1/main.js"
                                                >
                                                    https://cdn.jsdelivr.net/npm/@yet-another/lib@3.2.1/main.js
                                                </td>
                                                <td>
                                                    <input
                                                        class="module-override-url w-full bg-transparent border-slate-400/50 focus:bg-white/70"
                                                        placeholder="Enter override URL"
                                                        type="text"
                                                    />
                                                </td>
                                                <td class="text-[var(--text-secondary-light)]">-</td>
                                                <td>
                                                    <span class="status-badge status-badge-gray">
                                                        <span class="material-icons-round">watch_later</span> Not Loaded
                                                    </span>
                                                </td>
                                                <td class="space-x-2">
                                                    <button
                                                        class="icon-button text-[var(--accent-blue)] hover:bg-blue-500/20"
                                                        title="Save Override"
                                                    >
                                                        <span class="material-icons-outlined text-lg">save</span>
                                                    </button>
                                                    <button
                                                        class="icon-button text-[var(--text-secondary-light)] hover:bg-gray-500/20"
                                                        title="Reset to Default"
                                                    >
                                                        <span class="material-icons-outlined text-lg">undo</span>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </section>
                    </div>
                    <div class="tab-pane hidden" id="tab-content-module-loader-log">
                        <section class="mb-6">
                            <div class="bg-transparent p-0">
                                <h2 class="text-xl font-semibold text-[var(--text-primary-light)] mb-4">
                                    Module Loader Debug Log
                                </h2>
                                <div
                                    class="bg-black/60 text-gray-200 p-4 rounded-lg font-mono text-xs max-h-96 overflow-y-auto leading-relaxed supports-[backdrop-filter]:bg-black/50 supports-[backdrop-filter]:backdrop-blur-md border border-gray-700/50"
                                >
                                    <p><span class="text-sky-400">[INFO]</span> MicroTSM DevTools activated.</p>
                                    <p>
                                        <span class="text-cyan-400">[LOAD]</span> Module @microtsm/core requested from
                                        <span class="text-yellow-400]"
                                            >https://cdn.jsdelivr.net/npm/@microtsm/core@1.2.3/dist/index.js</span
                                        >
                                    </p>
                                    <p>
                                        <span class="text-cyan-400">[LOAD]</span> Module @microtsm/core loaded in
                                        <span class="text-purple-400]">120ms</span>.
                                    </p>
                                    <p>
                                        <span class="text-cyan-400">[LOAD]</span> Module @microtsm/utils requested from
                                        <span class="text-yellow-400]"
                                            >https://cdn.jsdelivr.net/npm/@microtsm/utils@0.5.1/dist/index.js</span
                                        >
                                    </p>
                                    <p>
                                        <span class="text-yellow-300">[WARN]</span> Override for @microtsm/utils:
                                        <span class="text-yellow-400]">http://localhost:8081/utils.js</span>
                                    </p>
                                    <p>
                                        <span class="text-red-400">[ERROR]</span> Failed to load module
                                        @microtsm/ui-components: NetworkError.
                                        <a class="text-sky-400 underline hover:text-sky-300" href="#"
                                            >View stack trace</a
                                        >
                                    </p>
                                </div>
                            </div>
                        </section>
                    </div>
                    <div class="tab-pane hidden" id="tab-content-performance-metrics">
                        <section>
                            <div class="bg-transparent p-0">
                                <h2 class="text-xl font-semibold text-[var(--text-primary-light)] mb-4">
                                    Performance Metrics
                                </h2>
                                <div class="p-4 rounded-lg space-y-3 text-sm glass-surface">
                                    <div class="flex justify-between items-center">
                                        <span class="text-[var(--text-secondary-light)]">Total Modules Loaded:</span>
                                        <span class="font-medium text-[var(--text-primary-light)]">1 / 3</span>
                                    </div>
                                    <hr class="border-[var(--divider-light)]" />
                                    <div class="flex justify-between items-center">
                                        <span class="text-[var(--text-secondary-light)]">Overall Load Time:</span>
                                        <span class="font-medium text-[var(--text-primary-light)]">250ms</span>
                                    </div>
                                    <hr class="border-[var(--divider-light)]" />
                                    <div class="flex justify-between items-center">
                                        <span class="text-[var(--text-secondary-light)]">Average Load Time:</span>
                                        <span class="font-medium text-[var(--text-primary-light)]">120ms</span>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                    <div class="tab-pane hidden" id="tab-content-contextual-information">
                        <section>
                            <div class="bg-transparent p-0">
                                <h2 class="text-xl font-semibold text-[var(--text-primary-light)] mb-4">
                                    Contextual Information
                                </h2>
                                <div class="p-4 rounded-lg space-y-3 text-sm glass-surface">
                                    <div>
                                        <span class="text-[var(--text-secondary-light)] block mb-1"
                                            >Base URL (import.meta.url):</span
                                        >
                                        <div
                                            class="bg-white/60 p-2.5 rounded-md text-xs text-[var(--text-primary-light)] border border-[var(--divider-light)] truncate supports-[backdrop-filter]:bg-white/40 supports-[backdrop-filter]:backdrop-blur-sm"
                                        >
                                            http://localhost:3000/app/
                                        </div>
                                    </div>
                                    <hr class="border-[var(--divider-light)]" />
                                    <div>
                                        <span class="text-[var(--text-secondary-light)] block mb-1"
                                            >Active Local Storage Key:</span
                                        >
                                        <div
                                            class="bg-white/60 p-2.5 rounded-md text-xs text-[var(--text-primary-light)] border border-[var(--divider-light)] truncate supports-[backdrop-filter]:bg-white/40 supports-[backdrop-filter]:backdrop-blur-sm"
                                        >
                                            MicroTSM_DEV=1
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </main>
            </div>
            <footer class="footer p-3 text-xs text-center">
                MicroTSM Developer Tools v0.1.0 Â© 2024. For development use only.
            </footer>
        </div>
        <div class="fixed inset-0 dialog-overlay flex items-center justify-center p-4 z-50 hidden" id="confirm-dialog">
            <div class="dialog-content w-full max-w-md">
                <div class="flex items-start">
                    <div class="flex-shrink-0 text-[var(--accent-blue)]">
                        <span class="material-icons-outlined text-3xl">help_outline</span>
                    </div>
                    <div class="ml-4">
                        <h3 class="dialog-title" id="confirm-dialog-title">Confirm Action</h3>
                        <p class="dialog-message" id="confirm-dialog-message">Are you sure you want to proceed?</p>
                    </div>
                </div>
                <div class="mt-5 flex items-center">
                    <input
                        class="h-4 w-4 text-[var(--accent-blue)] border-[var(--divider-light)] rounded focus:ring-[var(--accent-blue)] focus:ring-offset-2"
                        id="dont-show-again"
                        name="dont-show-again"
                        type="checkbox"
                    />
                    <label class="ml-2 block dialog-checkbox-label" for="dont-show-again">Don't show this again</label>
                </div>
                <div class="mt-6 flex justify-end space-x-3">
                    <button class="button-secondary" id="confirm-dialog-cancel" type="button">Cancel</button>
                    <button class="button-primary" id="confirm-dialog-confirm" type="button">Confirm</button>
                </div>
            </div>
        </div>
        <script>
            const toggleButton = document.getElementById('toggle-fullscreen-btn');
            const panel = document.getElementById('devtools-panel');
            const iconElement = toggleButton.querySelector('span');
            const closeButton = document.getElementById('close-panel-btn');
            const searchInput = document.getElementById('search-modules-input');
            const modulesTbody = document.getElementById('modules-tbody');
            const persistedStatus = document.getElementById('persisted-status');
            const persistedStatusIcon = persistedStatus.querySelector('span');
            const confirmDialog = document.getElementById('confirm-dialog');
            const confirmDialogTitle = document.getElementById('confirm-dialog-title');
            const confirmDialogMessage = document.getElementById('confirm-dialog-message');
            const confirmDialogCancelBtn = document.getElementById('confirm-dialog-cancel');
            const confirmDialogConfirmBtn = document.getElementById('confirm-dialog-confirm');
            const dontShowAgainCheckbox = document.getElementById('dont-show-again');
            let confirmCallback = null;
            let cancelCallback = null;
            let dialogIdentifier = '';

            function showConfirmDialog(title, message, onConfirm, onCancel, id) {
                dialogIdentifier = id;
                if (localStorage.getItem(`dontShow_${dialogIdentifier}`) === 'true') {
                    onConfirm();
                    return;
                }
                confirmDialogTitle.textContent = title;
                confirmDialogMessage.textContent = message;
                confirmCallback = onConfirm;
                cancelCallback = onCancel;
                dontShowAgainCheckbox.checked = false;
                confirmDialog.classList.remove('hidden');
            }

            confirmDialogConfirmBtn.addEventListener('click', () => {
                if (dontShowAgainCheckbox.checked && dialogIdentifier) {
                    localStorage.setItem(`dontShow_${dialogIdentifier}`, 'true');
                }
                confirmDialog.classList.add('hidden');
                if (confirmCallback) confirmCallback();
            });
            confirmDialogCancelBtn.addEventListener('click', () => {
                confirmDialog.classList.add('hidden');
                if (cancelCallback) cancelCallback();
            });
            toggleButton.addEventListener('click', () => {
                const isCompact = panel.classList.contains('devtools-panel-compact');
                panel.classList.toggle('devtools-panel-compact', !isCompact);
                panel.classList.toggle('devtools-panel-fullscreen', isCompact);
                if (isCompact) {
                    //Switching to fullscreen
                    panel.classList.remove(
                        'w-[850px]',
                        'max-h-[calc(100vh-32px)]',
                        'fixed',
                        'bottom-4',
                        'right-4',
                        'rounded-xl',
                        'shadow-[var(--panel-shadow)]',
                    );
                    panel.classList.add(
                        'w-screen',
                        'h-screen',
                        'fixed',
                        'top-0',
                        'left-0',
                        'rounded-none',
                        'shadow-none',
                    );
                    iconElement.textContent = 'fullscreen_exit';
                    toggleButton.title = 'Exit Fullscreen';
                } else {
                    //Switching to compact
                    panel.classList.remove(
                        'w-screen',
                        'h-screen',
                        'fixed',
                        'top-0',
                        'left-0',
                        'rounded-none',
                        'shadow-none',
                    );
                    panel.classList.add(
                        'w-[850px]',
                        'max-h-[calc(100vh-32px)]',
                        'fixed',
                        'bottom-4',
                        'right-4',
                        'rounded-xl',
                        'shadow-[var(--panel-shadow)]',
                    );
                    iconElement.textContent = 'fullscreen';
                    toggleButton.title = 'Toggle Fullscreen';
                }
            });
            closeButton.addEventListener('click', () => {
                panel.style.display = 'none';
            });
            const tabButtons = document.querySelectorAll('aside nav button');
            const tabPanes = document.querySelectorAll('main .tab-pane');
            tabButtons.forEach((button) => {
                button.addEventListener('click', () => {
                    tabButtons.forEach((btn) => {
                        btn.classList.remove('tab-active');
                        btn.classList.add(
                            'text-[var(--text-secondary-light)]',
                            'hover:bg-gray-500/20',
                            'border-transparent',
                        ); // Updated hover for glass
                        btn.classList.remove('bg-[var(--accent-blue)]', 'text-[var(--background-light)]');
                    });
                    tabPanes.forEach((pane) => {
                        pane.classList.add('hidden');
                        pane.classList.remove('active');
                    });
                    button.classList.add('tab-active');
                    button.classList.remove(
                        'text-[var(--text-secondary-light)]',
                        'hover:bg-gray-500/20',
                        'border-transparent',
                    );
                    button.classList.add('bg-[var(--accent-blue)]', 'text-[var(--background-light)]');
                    const tabId = button.dataset.tab;
                    const activePane = document.getElementById(`tab-content-${tabId}`);
                    if (activePane) {
                        activePane.classList.remove('hidden');
                        activePane.classList.add('active');
                    }
                });
            });
            searchInput.addEventListener('input', (event) => {
                const searchTerm = event.target.value.toLowerCase();
                const rows = modulesTbody.querySelectorAll('tr');
                rows.forEach((row) => {
                    const moduleName = row.querySelector('td:first-child').textContent.toLowerCase();
                    const originalUrl = row.querySelector('td:nth-child(2)').textContent.toLowerCase();
                    if (moduleName.includes(searchTerm) || originalUrl.includes(searchTerm)) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });
            modulesTbody.addEventListener('click', (event) => {
                const target = event.target.closest('button');
                if (!target) return;
                const row = target.closest('tr');
                const moduleName = row.querySelector('td:first-child').textContent;
                const overrideInput = row.querySelector('.module-override-url');
                if (target.querySelector('span').textContent === 'save') {
                    const overrideUrl = overrideInput.value;
                    const dialogId = `saveOverride_${moduleName.replace(/[^a-zA-Z0-9]/g, '_')}`;
                    showConfirmDialog(
                        'Save Override',
                        `Are you sure you want to save the override for ${moduleName} to: ${overrideUrl || '(cleared)'}?`,
                        () => {
                            console.log(`Saving override for ${moduleName}: ${overrideUrl}`);
                            persistedStatus.className = 'status-badge status-badge-green'; // Reset and apply
                            persistedStatusIcon.textContent = 'save';
                            persistedStatus.childNodes[2].nodeValue = ' Overrides Persisted';
                            const saveIcon = target.querySelector('span');
                            saveIcon.textContent = 'check';
                            saveIcon.classList.add('text-green-500'); // Use Tailwind for color
                            setTimeout(() => {
                                saveIcon.textContent = 'save';
                                saveIcon.classList.remove('text-green-500');
                            }, 1500);
                        },
                        () => {
                            console.log(`Save operation for ${moduleName} cancelled.`);
                        },
                        dialogId,
                    );
                } else if (target.querySelector('span').textContent === 'undo') {
                    const dialogId = `resetOverride_${moduleName.replace(/[^a-zA-Z0-9]/g, '_')}`;
                    showConfirmDialog(
                        'Reset Override',
                        `Are you sure you want to reset the override for ${moduleName}? This will clear any custom URL.`,
                        () => {
                            console.log(`Resetting override for ${moduleName}`);
                            overrideInput.value = '';
                            persistedStatus.className = 'status-badge status-badge-yellow';
                            persistedStatusIcon.textContent = 'warning';
                            persistedStatus.childNodes[2].nodeValue = ' Changes Not Persisted';
                        },
                        () => {
                            console.log(`Reset operation for ${moduleName} cancelled.`);
                        },
                        dialogId,
                    );
                }
            });
            modulesTbody.addEventListener('input', (event) => {
                if (event.target.classList.contains('module-override-url')) {
                    persistedStatus.className = 'status-badge status-badge-yellow';
                    persistedStatusIcon.textContent = 'warning';
                    persistedStatus.childNodes[2].nodeValue = ' Changes Not Persisted';
                }
            });
            // Initial tab setup
            document.querySelector('aside nav button[data-tab="import-map-overrides"]').click();
            console.log('MicroTSM Devtools Panel Initialized - Liquid Glass Style');
        </script>
    </body>
</html>
